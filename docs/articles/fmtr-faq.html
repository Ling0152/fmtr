<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Frequently Asked Questions • fmtr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Frequently Asked Questions">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fmtr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.6.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/fmtr.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/fmtr-fdata.html">Format Data Function</a>
    </li>
    <li>
      <a href="../articles/fmtr-fapply.html">Format Apply Function</a>
    </li>
    <li>
      <a href="../articles/fmtr-fcat.html">Format Catalogs</a>
    </li>
    <li>
      <a href="../articles/fmtr-fapply2.html">Format and Combine</a>
    </li>
    <li>
      <a href="../articles/fmtr-convenience.html">Convenience Functions</a>
    </li>
    <li>
      <a href="../articles/fmtr-helpers.html">Helper Functions</a>
    </li>
    <li>
      <a href="../articles/fmtr-example1.html">Complete Example 1</a>
    </li>
    <li>
      <a href="../articles/fmtr-example2.html">Complete Example 2</a>
    </li>
    <li>
      <a href="../articles/fmtr-faq.html">Frequently Asked Questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/fmtr-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/fmtr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Frequently Asked Questions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/fmtr/blob/HEAD/vignettes/fmtr-faq.Rmd" class="external-link"><code>vignettes/fmtr-faq.Rmd</code></a></small>
      <div class="hidden name"><code>fmtr-faq.Rmd</code></div>

    </div>

    
    
<p>Below are some frequently asked questions about the
<strong>fmtr</strong> package. Click on the links below to navigate to
the full question and answer content.</p>
<div class="section level2">
<h2 id="top">Index<a class="anchor" aria-label="anchor" href="#top"></a>
</h2>
<ul>
<li><a href="#fdata">How do I format a data frame?</a></li>
<li><a href="#fapply">How can I add a new, formatted column to my
dataframe?</a></li>
<li><a href="#lookup">How do I use a format as a lookup?</a></li>
<li><a href="#documentation">Where is the documentation for the
formatting codes?</a></li>
<li><a href="#formats">How do I assign formats from metadata to my data
frame?</a></li>
<li><a href="#labels">How do I assign labels from metadata to my data
frame?</a></li>
<li><a href="#descriptions">How do I assign descriptions from metadata
to my data frame?</a></li>
<li><a href="#fcat">How do I create a format catalog?</a></li>
<li><a href="#usefmt">How do I use formats from a format
catalog?</a></li>
<li><a href="#assign">How do I assign formats from a catalog to a data
frame?</a></li>
<li><a href="#excel">How do I create a format catalog from an Excel
spreadsheet?</a></li>
<li><a href="#export">How do I export my format catalog to a
spreadsheet?</a></li>
<li><a href="#asfmt">Can I create a user-defined format from
data?</a></li>
<li><a href="#input">Can I create an input format?</a></li>
<li><a href="#numeric">Can I create a numeric user-defined
format?</a></li>
<li><a href="#path">Is there a way to set up a search path for a format
catalog?</a></li>
<li><a href="#sas7bcat">Is there a way to read in a format catalog from
SAS®?</a></li>
<li><a href="#labelsmoved">What happened to the labels()
function?</a></li>
<li><a href="#udfedit">Can I change a User-Defined Format after it has
been created?</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="content">Content<a class="anchor" aria-label="anchor" href="#content"></a>
</h2>
<div class="section level3">
<h3 id="fdata">How do I format a data frame?<a class="anchor" aria-label="anchor" href="#fdata"></a>
</h3>
<p><strong>Q:</strong> I have a data frame with different types of
variables: numbers, dates, character values. How can I format them
without messing up the original data?</p>
<p><strong>A:</strong> With the <strong>fmtr</strong> package you can
assign the formats to the “format” attribute of the dataframe, and the
apply the formats using the <code><a href="../reference/fdata.html">fdata()</a></code> function, returning the
result to a new data frame. Here is a simple example:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create sample data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>SUBJ <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                  BDATE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1945-10-17"</span><span class="op">)</span>, </span>
<span>                            <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1967-09-04"</span><span class="op">)</span>,</span>
<span>                            <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1998-04-28"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                  SEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span>,</span>
<span>                  WEIGHT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">77.1107</span>, <span class="fl">64.2848</span>, <span class="fl">85.9842</span><span class="op">)</span><span class="op">)</span></span>
<span>                  </span>
<span><span class="co"># View data                  </span></span>
<span><span class="va">dat</span></span>
<span><span class="co">#   SUBJ      BDATE SEX  WEIGHT</span></span>
<span><span class="co"># 1    1 1945-10-17   M 77.1107</span></span>
<span><span class="co"># 2    2 1967-09-04   F 64.2848</span></span>
<span><span class="co"># 3    3 1998-04-28   M 85.9842</span></span>
<span></span>
<span><span class="co"># Assign formats</span></span>
<span><span class="fu"><a href="../reference/formats.html">formats</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>BDATE <span class="op">=</span> <span class="st">"%Y/%m/%d"</span>,</span>
<span>                     SEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span> <span class="op">=</span> <span class="st">"Male"</span>, <span class="st">"F"</span> <span class="op">=</span> <span class="st">"Female"</span><span class="op">)</span>,</span>
<span>                     WEIGHT <span class="op">=</span> <span class="st">"%1.1f kg"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply formats to new data frame</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fdata.html">fdata</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View new data frame</span></span>
<span><span class="va">dat2</span></span>
<span><span class="co">#   SUBJ      BDATE    SEX  WEIGHT</span></span>
<span><span class="co"># 1    1 1945/10/17   Male 77.1 kg</span></span>
<span><span class="co"># 2    2 1967/09/04 Female 64.3 kg</span></span>
<span><span class="co"># 3    3 1998/04/28   Male 86.0 kg</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="fapply">How can I add a new, formatted column to my dataframe?<a class="anchor" aria-label="anchor" href="#fapply"></a>
</h3>
<p><strong>Q:</strong> I want to add a new column to my data frame using
a format. This column will be a categorization of an existing continuous
column. I want to add it directly to my existing data frame, not create
a new one. How can I do that?</p>
<p><strong>A:</strong> First create a categorization format:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fmt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">5</span>, <span class="st">"A"</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">5</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then we’ll create some sample data:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                  NUM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then you can apply the format to your data frame using either Base R
or <strong>tidyverse</strong>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Base R method</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">CAT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">NUM</span>, <span class="va">fmt</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View result</span></span>
<span><span class="va">dat</span></span>
<span><span class="co">#   ID NUM CAT</span></span>
<span><span class="co"># 1  1   2   A</span></span>
<span><span class="co"># 2  2   3   A</span></span>
<span><span class="co"># 3  3   7   B</span></span>
<span></span>
<span><span class="co"># tidyverse method</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>       <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>CAT <span class="op">=</span> <span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="va">NUM</span>, <span class="va">fmt</span><span class="op">)</span><span class="op">)</span></span>
<span>       </span>
<span><span class="va">dat</span></span>
<span><span class="co">#   ID NUM CAT</span></span>
<span><span class="co"># 1  1   2   A</span></span>
<span><span class="co"># 2  2   3   A</span></span>
<span><span class="co"># 3  3   7   B</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="lookup">How do I use a format as a lookup?<a class="anchor" aria-label="anchor" href="#lookup"></a>
</h3>
<p><strong>Q:</strong> I have a decode lookup I want to use on a
variable in my dataframe. How can I do this with the
<strong>fmtr</strong> package?</p>
<p><strong>A:</strong> There are two common ways to apply a lookup
decode with the <strong>fmtr</strong> package. One is to create a named
vector from the decode. The other is to create a user-defined
format.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create sample data frame</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>                  CODE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"C"</span>, <span class="st">"B"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create decode vector</span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>A <span class="op">=</span> <span class="st">"Value A"</span>, B <span class="op">=</span> <span class="st">"Value B"</span>, C <span class="op">=</span> <span class="st">"Value C"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create user-defined format</span></span>
<span><span class="va">fmt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"A"</span>, <span class="st">"Value A"</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"B"</span>, <span class="st">"Value B"</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"C"</span>, <span class="st">"Value C"</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">)</span></span>
<span>              </span>
<span><span class="co"># Apply decode vector</span></span>
<span><span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">CODE</span>, <span class="va">v1</span><span class="op">)</span></span>
<span><span class="co"># [1] "Value A" "Value C" "Value B" NA </span></span>
<span></span>
<span><span class="co"># Apply user-defined format</span></span>
<span><span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">CODE</span>, <span class="va">fmt1</span><span class="op">)</span></span>
<span><span class="co"># [1] "Value A" "Value C" "Value B" "Other"</span></span></code></pre></div>
<p>As you can see, both the named vector and the user-defined format can
decode the data. The advantage of the user-defined format is that it
allows you to handle NA values and assign defaults in a controlled
way.</p>
<p>The named vector is easy to create. But there is no way to control
what happens to any data value that is not in the lookup. Which method
to use depends on your data and the context in which you are applying
the decode.</p>
<p>Note that you may also write a vectorized function to perform the
lookup. See “Example 4” in the documentation on <code><a href="../reference/fapply.html">fapply()</a></code>
for a vectorized function example.</p>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="documentation">Where is the documentation for the formatting codes?<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h3>
<p><strong>Q:</strong> I’m trying to create some formats for dates and
numbers, but am not sure what codes are available. Where is the
documentation for the possible codes?</p>
<p><strong>A:</strong> Some commonly used codes are documented as part
of the <strong>fmtr</strong> documentation <a href="https://fmtr.r-sassy.org/reference/FormattingStrings.html">here</a>.
Additional documentation on the possible codes for dates is <a href="https://rdrr.io/r/base/strptime.html" class="external-link">here</a>, and for numbers <a href="https://rdrr.io/r/base/sprintf.html" class="external-link">here</a>.</p>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="formats">How do I assign formats from metadata to my data frame?<a class="anchor" aria-label="anchor" href="#formats"></a>
</h3>
<p><strong>Q:</strong> I have metadata for my datasets that includes the
desired format for each variable. How can I apply these formats to my
data?</p>
<p><strong>A:</strong> The metadata must ultimately map the variable
name to the desired format for that variable. So we can imagine there
are at least two columns in the metadata: the variable name and the
format.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sample metadata</span></span>
<span><span class="va">mdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"col1"</span>, <span class="st">"col2"</span>, <span class="st">"col3"</span><span class="op">)</span>,</span>
<span>                   fmt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"%1.1f"</span>, <span class="st">"%m-%d-%Y"</span>, <span class="st">"%1.2f%%"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View metadata</span></span>
<span><span class="va">mdat</span></span>
<span><span class="co">#    var      fmt</span></span>
<span><span class="co"># 1 col1    %1.1f</span></span>
<span><span class="co"># 2 col2 %m-%d-%Y</span></span>
<span><span class="co"># 3 col3  %1.2f%%</span></span></code></pre></div>
<p>Then imagine another data frame that needs formatting:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sample data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>col1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.235</span>, <span class="fl">3.3947</span>, <span class="fl">7.2842</span><span class="op">)</span>,</span>
<span>                  col2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-11-01"</span><span class="op">)</span>,</span>
<span>                           <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-11-02"</span><span class="op">)</span>,</span>
<span>                           <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-11-03"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                  col3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">23.325</span>, <span class="fl">87.2746</span>, <span class="fl">64.2184</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View sample data</span></span>
<span><span class="va">dat</span></span>
<span><span class="co">#     col1       col2    col3</span></span>
<span><span class="co"># 1 1.2350 2021-11-01 23.3250</span></span>
<span><span class="co"># 2 3.3947 2021-11-02 87.2746</span></span>
<span><span class="co"># 3 7.2842 2021-11-03 64.2184</span></span></code></pre></div>
<p>Now we can put the format metadata into a list:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create list out of metadata vectors</span></span>
<span><span class="va">lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">mdat</span><span class="op">$</span><span class="va">fmt</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lst</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">mdat</span><span class="op">$</span><span class="va">var</span></span>
<span></span>
<span><span class="co"># View List</span></span>
<span><span class="va">lst</span></span>
<span><span class="co"># $col1</span></span>
<span><span class="co"># [1] "%1.1f"</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># $col2</span></span>
<span><span class="co"># [1] "%m-%d-%Y"</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $col3</span></span>
<span><span class="co"># [1] "%1.2f%%"</span></span></code></pre></div>
<p>Now we can assign the list of formats to the dataframe format
attributes using the <code><a href="../reference/formats.html">formats()</a></code> function:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assign formats to data</span></span>
<span><span class="fu"><a href="../reference/formats.html">formats</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">lst</span></span>
<span></span>
<span><span class="co"># Data not formatted yet</span></span>
<span><span class="va">dat</span></span>
<span><span class="co">#     col1       col2    col3</span></span>
<span><span class="co"># 1 1.2350 2021-11-01 23.3250</span></span>
<span><span class="co"># 2 3.3947 2021-11-02 87.2746</span></span>
<span><span class="co"># 3 7.2842 2021-11-03 64.2184</span></span></code></pre></div>
<p>Then apply the formats using <code><a href="../reference/fdata.html">fdata()</a></code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Apply the formats to entire data frame</span></span>
<span><span class="fu"><a href="../reference/fdata.html">fdata</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co">#   col1       col2   col3</span></span>
<span><span class="co"># 1  1.2 11-01-2021 23.32%</span></span>
<span><span class="co"># 2  3.4 11-02-2021 87.27%</span></span>
<span><span class="co"># 3  7.3 11-03-2021 64.22%</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="labels">How do I assign labels from metadata to my data frame?<a class="anchor" aria-label="anchor" href="#labels"></a>
</h3>
<p><strong>Q:</strong> I have metadata for my datasets that includes the
desired label for each variable. How can I apply these labels to my
data?</p>
<p><strong>A:</strong> This question is similar to the above question
concerning formats in metadata. The process for applying labels from
metadata will be nearly identical to the process for formats. You will
create a named list of labels from the metadata, then assign it to the
dataframe, and apply it with <code><a href="../reference/fdata.html">fdata()</a></code>. The difference is
that in the case of labels, you will assign them with the
<code><a href="https://rdrr.io/r/base/labels.html" class="external-link">labels()</a></code> function instead of the <code><a href="../reference/formats.html">formats()</a></code>
function. Like this:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create sample list of labels</span></span>
<span><span class="va">lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col1 <span class="op">=</span> <span class="st">"My First Column"</span>,</span>
<span>            col2 <span class="op">=</span> <span class="st">"My Second Column"</span>, </span>
<span>            col3 <span class="op">=</span> <span class="st">"My Third Column"</span><span class="op">)</span></span>
<span>            </span>
<span><span class="co"># Create sample data frame</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>col1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.235</span>, <span class="fl">3.3947</span>, <span class="fl">7.2842</span><span class="op">)</span>,</span>
<span>                  col2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-11-01"</span><span class="op">)</span>,</span>
<span>                           <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-11-02"</span><span class="op">)</span>,</span>
<span>                           <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-11-03"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                  col3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">23.325</span>, <span class="fl">87.2746</span>, <span class="fl">64.2184</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assign labels to data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/labels.html" class="external-link">labels</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">lst</span></span>
<span></span>
<span><span class="co"># View label attributes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/labels.html" class="external-link">labels</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co"># $col1</span></span>
<span><span class="co"># [1] "My First Column"</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $col2</span></span>
<span><span class="co"># [1] "My Second Column"</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $col3</span></span>
<span><span class="co"># [1] "My Third Column"</span></span></code></pre></div>
<p>Note that starting in <strong>fmtr</strong> 1.5.8, the
<code><a href="https://rdrr.io/r/base/labels.html" class="external-link">labels()</a></code> function has been moved to the
<strong>common</strong> package. To use the <code><a href="https://rdrr.io/r/base/labels.html" class="external-link">labels()</a></code>
function, please reference that package.</p>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="descriptions">How do I assign descriptions from metadata to my data frame?<a class="anchor" aria-label="anchor" href="#descriptions"></a>
</h3>
<p><strong>Q:</strong> I have metadata for my datasets that includes the
desired descriptions for each variable. How can I apply these
descriptions to my data?</p>
<p><strong>A:</strong> This question is similar to the questions on
applying formats from metadata, and applying labels from metadata. The
only difference is that you will use the <code><a href="../reference/descriptions.html">descriptions()</a></code>
function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assign descriptions</span></span>
<span><span class="fu"><a href="../reference/descriptions.html">descriptions</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col1 <span class="op">=</span> <span class="st">"Here is my description for col1."</span>,</span>
<span>                          col2 <span class="op">=</span> <span class="st">"Here is my description for col2."</span>,</span>
<span>                          col3 <span class="op">=</span> <span class="st">"Here is my description for col3."</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View descriptions</span></span>
<span><span class="fu"><a href="../reference/descriptions.html">descriptions</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co"># $col1</span></span>
<span><span class="co"># [1] "Here is my description for col1."</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $col2</span></span>
<span><span class="co"># [1] "Here is my description for col2."</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $col3</span></span>
<span><span class="co"># [1] "Here is my description for col3."</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="fcat">How do I create a format catalog?<a class="anchor" aria-label="anchor" href="#fcat"></a>
</h3>
<p><strong>Q:</strong> I want to create a format catalog, save that
catalog, and reuse it later. How can I do that?</p>
<p><strong>A:</strong> The <strong>fmtr</strong> package provides all
the functions necessary to do what you want. Here is an example:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fmtr.r-sassy.org">fmtr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create format catalog</span></span>
<span><span class="va">fmts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fcat.html">fcat</a></span><span class="op">(</span>AGECAT <span class="op">=</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">18</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">24</span>, <span class="st">"18 to 24"</span><span class="op">)</span>,</span>
<span>                            <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">25</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">44</span>, <span class="st">"25 to 44"</span><span class="op">)</span>,</span>
<span>                            <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">45</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">64</span>, <span class="st">"45 to 64"</span><span class="op">)</span>,</span>
<span>                            <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">65</span>, <span class="st">"&gt;= 65"</span><span class="op">)</span>,</span>
<span>                            <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             SEX <span class="op">=</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="st">"Missing"</span><span class="op">)</span>,</span>
<span>                         <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"M"</span>, <span class="st">"Male"</span><span class="op">)</span>,</span>
<span>                         <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"F"</span>, <span class="st">"Female"</span><span class="op">)</span>,</span>
<span>                         <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             VAR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span> <span class="op">=</span> <span class="st">"Age"</span>, </span>
<span>                     <span class="st">"AGECAT"</span> <span class="op">=</span> <span class="st">"Age Group"</span>, </span>
<span>                     <span class="st">"SEX"</span> <span class="op">=</span> <span class="st">"Sex"</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Save format catalog</span></span>
<span><span class="fu"><a href="../reference/write.fcat.html">write.fcat</a></span><span class="op">(</span><span class="va">fmts</span>, <span class="st">"c:/mypath"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read format catalog back in</span></span>
<span><span class="va">fmts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.fcat.html">read.fcat</a></span><span class="op">(</span><span class="st">"c:/mypath/fmts.fcat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View format catalog</span></span>
<span><span class="va">fmts</span></span>
<span><span class="co"># # A format catalog: 3 formats</span></span>
<span><span class="co"># - $AGECAT: type U, 5 conditions</span></span>
<span><span class="co"># - $SEX: type U, 4 conditions</span></span>
<span><span class="co"># - $VAR: type V, 3 elements</span></span>
<span></span>
<span><span class="co"># Use restored formats</span></span>
<span><span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">55</span>, <span class="fl">27</span>, <span class="fl">19</span><span class="op">)</span>, <span class="va">fmts</span><span class="op">$</span><span class="va">AGECAT</span><span class="op">)</span></span>
<span><span class="co"># [1] "45 to 64" "25 to 44" "18 to 24"</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="usefmt">How do I use formats from a format catalog?<a class="anchor" aria-label="anchor" href="#usefmt"></a>
</h3>
<p><strong>Q:</strong> My colleague gave me a format catalog. How can I
use it?</p>
<p><strong>A:</strong> First read the format catalog into R using
<code><a href="../reference/read.fcat.html">read.fcat()</a></code>. Then you can begin using the formats in the
catalog using dollar sign ($) notation. Here is an example:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read format catalog back in</span></span>
<span><span class="va">fmts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.fcat.html">read.fcat</a></span><span class="op">(</span><span class="st">"c:/mypath/fmts.fcat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View format catalog</span></span>
<span><span class="va">fmts</span></span>
<span><span class="co"># # A format catalog: 3 formats</span></span>
<span><span class="co"># - $AGECAT: type U, 5 conditions</span></span>
<span><span class="co"># - $SEX: type U, 4 conditions</span></span>
<span><span class="co"># - $VAR: type V, 3 elements</span></span>
<span></span>
<span><span class="co"># Use restored formats</span></span>
<span><span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">55</span>, <span class="fl">27</span>, <span class="fl">19</span><span class="op">)</span>, <span class="va">fmts</span><span class="op">$</span><span class="va">AGECAT</span><span class="op">)</span></span>
<span><span class="co"># [1] "45 to 64" "25 to 44" "18 to 24"</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="assign">How do I assign formats from a catalog to a data frame?<a class="anchor" aria-label="anchor" href="#assign"></a>
</h3>
<p><strong>Q:</strong> I have a format catalog that I use to store
formats. The formats are shared between several datasets. How can I
assign formats from the catalog to one of my datasets?</p>
<p><strong>A:</strong> Read the format catalog in using
<code><a href="../reference/read.fcat.html">read.fcat()</a></code>, then assign the formats using the
<code><a href="../reference/formats.html">formats()</a></code> function. Like this:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read format catalog in</span></span>
<span><span class="va">fmts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.fcat.html">read.fcat</a></span><span class="op">(</span><span class="st">"c:/mypath/fmts.fcat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View format catalog</span></span>
<span><span class="va">fmts</span></span>
<span><span class="co"># # A format catalog: 3 formats</span></span>
<span><span class="co"># - $AGECAT: type U, 5 conditions</span></span>
<span><span class="co"># - $SEX: type U, 4 conditions</span></span>
<span><span class="co"># - $VAR: type V, 3 elements</span></span>
<span></span>
<span><span class="co"># Create sample data frame</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span>header <span class="op">=</span> <span class="cn">TRUE</span>, text <span class="op">=</span> <span class="st">'</span></span>
<span><span class="st">SUBJECT  AGECAT SEX</span></span>
<span><span class="st">101       35      F</span></span>
<span><span class="st">102       19      F</span></span>
<span><span class="st">103       57      M</span></span>
<span><span class="st">'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assign formats from catalog to data frame</span></span>
<span><span class="fu"><a href="../reference/formats.html">formats</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">fmts</span></span>
<span></span>
<span><span class="co"># View formatted data</span></span>
<span><span class="fu"><a href="../reference/fdata.html">fdata</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co">#   SUBJECT   AGECAT    SEX</span></span>
<span><span class="co"># 1     101 25 to 44 Female</span></span>
<span><span class="co"># 2     102 18 to 24 Female</span></span>
<span><span class="co"># 3     103 45 to 64   Male</span></span></code></pre></div>
<p>Note that this only works when the format names in the catalog
correspond to the column names in the dataframe. If the names in the
catalog do not correspond to the column names, it is best to manipulate
the names of the format catalog using the <code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code> function
so that they match the column names in the dataframe. Then proceed as
above. Like this:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read format catalog in</span></span>
<span><span class="va">fmts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.fcat.html">read.fcat</a></span><span class="op">(</span><span class="st">"c:/packages/fmts.fcat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View format catalog</span></span>
<span><span class="va">fmts</span></span>
<span><span class="co"># # A format catalog: 3 formats</span></span>
<span><span class="co"># - $AGECAT: type U, 5 conditions</span></span>
<span><span class="co"># - $SEX: type U, 4 conditions</span></span>
<span><span class="co"># - $VAR: type V, 3 elements</span></span>
<span></span>
<span><span class="co"># Create sample data frame</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span>header <span class="op">=</span> <span class="cn">TRUE</span>, text <span class="op">=</span> <span class="st">'</span></span>
<span><span class="st">SUBJ     AGE GENDER</span></span>
<span><span class="st">101       35      F</span></span>
<span><span class="st">102       19      F</span></span>
<span><span class="st">103       57      M</span></span>
<span><span class="st">'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reassign format names in catalog</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">fmts</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"GENDER"</span>, <span class="st">"VAR"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assign formats from catalog to data frame</span></span>
<span><span class="fu"><a href="../reference/formats.html">formats</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">fmts</span></span>
<span></span>
<span><span class="co"># View formatted data</span></span>
<span><span class="fu"><a href="../reference/fdata.html">fdata</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co">#   SUBJECT   AGECAT    SEX</span></span>
<span><span class="co"># 1     101 25 to 44 Female</span></span>
<span><span class="co"># 2     102 18 to 24 Female</span></span>
<span><span class="co"># 3     103 45 to 64   Male</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="excel">How do I create a format catalog from an Excel spreadsheet?<a class="anchor" aria-label="anchor" href="#excel"></a>
</h3>
<p><strong>Q:</strong> I have format information stored in an Excel
spreadsheet. Can I use that to create a format catalog and format my
data?</p>
<p><strong>A:</strong> Yes, provided the data is either in the correct
structure or can be put in the correct structure to create a format
catalog. The correct structure includes the following columns: Name,
Type, Expression, Label and Order. See the documentation on
<code><a href="../reference/as.fcat.data.frame.html">as.fcat.data.frame()</a></code> for further description of the needed
column values.</p>
<p>Here is an example showing Excel data that is already in the correct
structure:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fmtr.r-sassy.org">fmtr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org" class="external-link">readxl</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read data from Excel</span></span>
<span><span class="va">xldat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_excel</a></span><span class="op">(</span><span class="st">"c:\\packages\\myxlfile.xlsx"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View data frame</span></span>
<span><span class="va">xldat</span></span>
<span><span class="co"># # A tibble: 10 x 5</span></span>
<span><span class="co"># Name   Type  Expression                                                Label    Order</span></span>
<span><span class="co"># &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;                                                     &lt;chr&gt;    &lt;lgl&gt;</span></span>
<span><span class="co"># 1  AGECAT U     "x &gt;= 18 &amp; x &lt;= 24"                                       18 to 24 NA   </span></span>
<span><span class="co"># 2  AGECAT U     "x &gt;= 25 &amp; x &lt;= 44"                                       25 to 44 NA   </span></span>
<span><span class="co"># 3  AGECAT U     "x &gt;= 45 &amp; x &lt;= 64"                                       45 to 64 NA   </span></span>
<span><span class="co"># 4  AGECAT U     "x &gt;= 65"                                                 &gt;= 65    NA   </span></span>
<span><span class="co"># 5  AGECAT U     "TRUE"                                                    Other    NA   </span></span>
<span><span class="co"># 6  SEX    U     "is.na(x)"                                                Missing  NA   </span></span>
<span><span class="co"># 7  SEX    U     "x == \"M\""                                              Male     NA   </span></span>
<span><span class="co"># 8  SEX    U     "x == \"F\""                                              Female   NA   </span></span>
<span><span class="co"># 9  SEX    U     "TRUE"                                                    Other    NA   </span></span>
<span><span class="co"># 10 VAR    V     "c(AGE = \"Age\", AGECAT = \"Age Group\", SEX = \"Sex\")" NA       NA </span></span>
<span></span>
<span><span class="co"># Convert dataframe to format catalog</span></span>
<span><span class="va">fmts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as.fcat.html">as.fcat</a></span><span class="op">(</span><span class="va">xldat</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View format catalog                     </span></span>
<span><span class="va">fmts</span></span>
<span><span class="co"># # A format catalog: 3 formats</span></span>
<span><span class="co"># - $AGECAT: type U, 5 conditions</span></span>
<span><span class="co"># - $SEX: type U, 4 conditions</span></span>
<span><span class="co"># - $VAR: type V, 3 element</span></span>
<span></span>
<span></span>
<span><span class="co"># Create sample data frame</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span>header <span class="op">=</span> <span class="cn">TRUE</span>, text <span class="op">=</span> <span class="st">'</span></span>
<span><span class="st">SUBJECT AGECAT  SEX</span></span>
<span><span class="st">101       35      F</span></span>
<span><span class="st">102       19      F</span></span>
<span><span class="st">103       57      M</span></span>
<span><span class="st">'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assign formats from catalog</span></span>
<span><span class="fu"><a href="../reference/formats.html">formats</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">fmts</span></span>
<span></span>
<span><span class="co"># Apply formats</span></span>
<span><span class="fu"><a href="../reference/fdata.html">fdata</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co">#   SUBJECT   AGECAT    SEX</span></span>
<span><span class="co"># 1     101 25 to 44 Female</span></span>
<span><span class="co"># 2     102 18 to 24 Female</span></span>
<span><span class="co"># 3     103 45 to 64   Male</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="export">How do I export my format catalog to a spreadsheet?<a class="anchor" aria-label="anchor" href="#export"></a>
</h3>
<p><strong>Q:</strong> I have a format catalog I created in R with the
<strong>fmtr</strong> package. I want to store that catalog in a
spreadsheet for documentation purposes. How can I do that?</p>
<p><strong>A:</strong> There is a Base R function
<code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> that can be used to convert a
<strong>fmtr</strong> user-defined format or a format catalog to a data
frame. From there, it is easy to export to Excel or any other file
format you like. Here is an example:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fmtr.r-sassy.org">fmtr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ycphs.github.io/openxlsx/index.html" class="external-link">openxlsx</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create sample format catlog</span></span>
<span><span class="va">fmts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fcat.html">fcat</a></span><span class="op">(</span>AGECAT <span class="op">=</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">18</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">24</span>, <span class="st">"18 to 24"</span><span class="op">)</span>,</span>
<span>                            <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">25</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">44</span>, <span class="st">"25 to 44"</span><span class="op">)</span>,</span>
<span>                            <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">45</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">64</span>, <span class="st">"45 to 64"</span><span class="op">)</span>,</span>
<span>                            <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">65</span>, <span class="st">"&gt;= 65"</span><span class="op">)</span>,</span>
<span>                            <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             SEX <span class="op">=</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="st">"Missing"</span><span class="op">)</span>,</span>
<span>                         <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"M"</span>, <span class="st">"Male"</span><span class="op">)</span>,</span>
<span>                         <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"F"</span>, <span class="st">"Female"</span><span class="op">)</span>,</span>
<span>                         <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             VAR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span> <span class="op">=</span> <span class="st">"Age"</span>, </span>
<span>                     <span class="st">"AGECAT"</span> <span class="op">=</span> <span class="st">"Age Group"</span>, </span>
<span>                     <span class="st">"SEX"</span> <span class="op">=</span> <span class="st">"Sex"</span><span class="op">)</span><span class="op">)</span> </span>
<span>                     </span>
<span><span class="co"># View format catalog                     </span></span>
<span><span class="va">fmts</span></span>
<span><span class="co"># # A format catalog: 3 formats</span></span>
<span><span class="co"># - $AGECAT: type U, 5 conditions</span></span>
<span><span class="co"># - $SEX: type U, 4 conditions</span></span>
<span><span class="co"># - $VAR: type V, 3 element</span></span>
<span></span>
<span><span class="co"># Convert format catalog to data frame</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">fmts</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write data frame to Excel using openxlsx</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/write.xlsx.html" class="external-link">write.xlsx</a></span><span class="op">(</span><span class="va">dat</span>, <span class="st">"c:\\mypath\\myxlfile.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="asfmt">Can I create a user-defined format from data?<a class="anchor" aria-label="anchor" href="#asfmt"></a>
</h3>
<p><strong>Q:</strong> I have a dataset with a code list that I want to
create a user-defined format from. Is there a way to do that?</p>
<p><strong>A:</strong> Yes. There is a function <code><a href="../reference/as.fmt.html">as.fmt()</a></code>
that allows you to convert a data frame into a user-defined format. But
the input dataframe needs a specific structure. Here is an example:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fmtr.r-sassy.org">fmtr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create sample input data </span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span>header <span class="op">=</span> <span class="cn">TRUE</span>, text <span class="op">=</span><span class="st">'</span></span>
<span><span class="st">        Col1  Col2 </span></span>
<span><span class="st">        A    "Label A"</span></span>
<span><span class="st">        B    "Label B"</span></span>
<span><span class="st">        C    "Label C"'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create main conditions</span></span>
<span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="st">"myfmt"</span>, </span>
<span>                  Type <span class="op">=</span> <span class="st">"U"</span>, </span>
<span>                  Expression <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x == '"</span>, <span class="va">dat</span><span class="op">$</span><span class="va">Col1</span>, <span class="st">"'"</span><span class="op">)</span>,</span>
<span>                  Label <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">Col2</span>,</span>
<span>                  Order <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create default condition</span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="st">"myfmt"</span>, </span>
<span>                  Type <span class="op">=</span> <span class="st">"U"</span>, </span>
<span>                  Expression <span class="op">=</span> <span class="st">"TRUE"</span>,</span>
<span>                  Label <span class="op">=</span> <span class="st">"Other"</span>,</span>
<span>                  Order <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Append default condition</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">df1</span>, <span class="va">df2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View input data</span></span>
<span><span class="va">df</span></span>
<span><span class="co">#    Name Type Expression   Label Order</span></span>
<span><span class="co"># 1 myfmt    U   x == 'A' Label A    NA</span></span>
<span><span class="co"># 2 myfmt    U   x == 'B' Label B    NA</span></span>
<span><span class="co"># 3 myfmt    U   x == 'C' Label C    NA</span></span>
<span><span class="co"># 4 myfmt    U       TRUE   Other    NA</span></span>
<span></span>
<span><span class="co"># Convert data frame to user-defined format </span></span>
<span><span class="va">fmt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as.fmt.html">as.fmt</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply the format</span></span>
<span><span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="va">fmt</span><span class="op">)</span></span>
<span><span class="co"># [1] "Label A" "Label B" "Label C" "Other" </span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="input">Can I create an input format?<a class="anchor" aria-label="anchor" href="#input"></a>
</h3>
<p><strong>Q:</strong> SAS® distinguishes between an input format and an
output format. Is there a similar distinction in the
<strong>fmtr</strong> package?</p>
<p><strong>A:</strong> No. All <strong>fmtr</strong> formats are output
formats.</p>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="numeric">Can I create a numeric user-defined format?<a class="anchor" aria-label="anchor" href="#numeric"></a>
</h3>
<p><strong>Q:</strong> I have a column of data with some character
values that I want to convert to a number. I’d like to create a format
to do that. Can I create a user-defined format that returns a number
instead of a text string?</p>
<p><strong>A:</strong> Yes. The second parameter of the
<code><a href="../reference/condition.html">condition()</a></code> function accepts a character, numeric, or
logical value. That means a <strong>fmtr</strong> user-defined format
can be used to translate incoming values, whether character or numeric,
to a number. Here is an example:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fmtr.r-sassy.org">fmtr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">nfmt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"A"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"B"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>              <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>, <span class="va">nfmt</span><span class="op">)</span></span>
<span><span class="co"># [1] 1 2 3</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="path">Is there a way to set up a search path for a format catalog?<a class="anchor" aria-label="anchor" href="#path"></a>
</h3>
<p><strong>Q:</strong> In SAS® you can set up a search path for a format
catalog, so you don’t need to read it. You can just reference the format
names and it will work. Is there a similar functionality in the
<strong>fmtr</strong> package?</p>
<p><strong>A:</strong> Not exactly. What you can do is use the
<code><a href="https://common.r-sassy.org/reference/file.find.html" class="external-link">file.find()</a></code> function from the <em>common</em> package to
search for the format catalog file, and then read the catalog into your
program using <code><a href="../reference/read.fcat.html">read.fcat()</a></code>. From there you just use the
format catalog as normal.</p>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="sas7bcat">Is there a way to read in a format catalog from SAS®?<a class="anchor" aria-label="anchor" href="#sas7bcat"></a>
</h3>
<p><strong>Q:</strong> I have an existing format catalog from SAS® that
I want to convert to R. Does the <strong>fmtr</strong> package provide a
way to read in a SAS® format catalog?</p>
<p><strong>A:</strong> Not directly. What you can do is export the SAS
format catalog to a dataset, read the dataset into R, and rearrange the
data to correspond to the requirements of
<code><a href="../reference/as.fcat.data.frame.html">as.fcat.data.frame()</a></code>. Then use
<code><a href="../reference/as.fcat.data.frame.html">as.fcat.data.frame()</a></code> to convert the data frame to a
<em>fmtr</em> format catalog. Note that SAS® provides a lot of
functionality in their formats that cannot be reproduced in
<strong>fmtr</strong>. So there is no guarantee that all your SAS
formats will convert as desired.</p>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="labelsmoved">What happened to the labels() function?<a class="anchor" aria-label="anchor" href="#labelsmoved"></a>
</h3>
<p><strong>Q:</strong> I had been using the <code><a href="https://rdrr.io/r/base/labels.html" class="external-link">labels()</a></code>
function in a few programs, and now they are all broken. It appears the
<code><a href="https://rdrr.io/r/base/labels.html" class="external-link">labels()</a></code> function is no longer part of the
<strong>fmtr</strong> package. What happened?</p>
<p><strong>A:</strong> The <code><a href="https://rdrr.io/r/base/labels.html" class="external-link">labels()</a></code> function has been moved
to the <strong>common</strong> package. The reason it was moved is
because this function is so generally useful, that the
<strong>common</strong> package was deemed a more appropriate home. You
can fix your code by simply adding a reference to the
<strong>common</strong> package.</p>
<p><a href="#top">top</a></p>
<hr>
</div>
<div class="section level3">
<h3 id="udfedit">Can I change a User-Defined Format after it has been created?<a class="anchor" aria-label="anchor" href="#udfedit"></a>
</h3>
<p><strong>Q:</strong> I created a User_Define Format, and now I want to
add a new item to it. Is there a way to do that?</p>
<p><strong>A:</strong> Yes. Reminder that, in the end, a User-Defined
Format is a list, and can be manipulated as such. You can change a
User-Defined Format the same way you change a list. For example:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fmtr.r-sassy.org">fmtr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create format</span></span>
<span><span class="va">fmt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"A"</span>, <span class="st">"Group A"</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"B"</span>, <span class="st">"Group B"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create sample data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply format</span></span>
<span><span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">fmt</span><span class="op">)</span></span>
<span><span class="co"># [1] "Group A" "Group B" "C"</span></span>
<span></span>
<span><span class="co"># Add "C" condition to format</span></span>
<span><span class="va">fmt</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">fmt</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition.html">condition</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"C"</span>, <span class="st">"Group C"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply revised format</span></span>
<span><span class="fu"><a href="../reference/fapply.html">fapply</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">fmt</span><span class="op">)</span></span>
<span><span class="co"># [1] "Group A" "Group B" "Group C"</span></span></code></pre></div>
<p><a href="#top">top</a></p>
<hr>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
